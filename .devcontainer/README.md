# Devcontainer Setup

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€APPIé–¢é€£æ³•ä»¤ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®é–‹ç™ºç’°å¢ƒã‚’ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã™ã‚‹ãŸã‚ã®Devcontainerè¨­å®šãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ³ æ§‹æˆ

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
.devcontainer/
â”œâ”€â”€ devcontainer.json    # VS Code Devcontainerè¨­å®š
â”œâ”€â”€ docker-compose.yml   # Docker Composeè¨­å®š
â”œâ”€â”€ Dockerfile          # ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ¡ãƒ¼ã‚¸å®šç¾©
â””â”€â”€ README.md           # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

### åŸºæœ¬ã‚¤ãƒ¡ãƒ¼ã‚¸
- **ãƒ™ãƒ¼ã‚¹**: `mcr.microsoft.com/devcontainers/typescript-node:1-20-bookworm`
- **Node.js**: 20.x LTS
- **OS**: Debian Bookworm

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ„ãƒ¼ãƒ«
- **è¨€èªãƒ»ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Node.js 20, TypeScript, tsx
- **é–‹ç™ºãƒ„ãƒ¼ãƒ«**: ESLint, Prettier, Git
- **ã‚·ã‚¹ãƒ†ãƒ **: poppler-utils (PDFå‡¦ç†), æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆ
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: curl, wget, jq, htop, tree

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. VS Code ã§ã®èµ·å‹•
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd appi-related-laws

# VS Code ã§é–‹ã
code .

# ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ (Ctrl/Cmd + Shift + P)
> Dev Containers: Reopen in Container
```

### 2. åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•å¾Œã€ä»¥ä¸‹ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
- `npm install`: ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- `npm run build`: TypeScriptãƒ“ãƒ«ãƒ‰

### 3. é–‹ç™ºé–‹å§‹
```bash
# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œ
npm run ingest    # æ³•ä»¤ãƒ‡ãƒ¼ã‚¿å–å¾—
npm run dev       # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰
npm run test      # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

## âš™ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### VS Code æ‹¡å¼µæ©Ÿèƒ½
ä»¥ä¸‹ã®æ‹¡å¼µæ©Ÿèƒ½ãŒè‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ï¼š
- TypeScriptæ”¯æ´
- ESLint/Prettier
- Markdownç·¨é›†æ”¯æ´
- PDFé–²è¦§
- æ—¥æœ¬èªã‚¹ãƒšãƒ«ãƒã‚§ãƒƒã‚¯

### ã‚¨ã‚¤ãƒªã‚¢ã‚¹
ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ä½¿ç”¨å¯èƒ½ãªã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼š
```bash
ll          # ls -la
ingest      # npm run ingest
build       # npm run build
```

### ãƒãƒ¼ãƒˆè»¢é€
- **3000**: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ç”¨
- **8080**: API/ç®¡ç†ç”»é¢ç”¨

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### æ¨©é™ã‚¨ãƒ©ãƒ¼
```bash
# ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™ä¿®æ­£
sudo chown -R vscode:vscode /workspace
```

### Node.jsä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
rm -rf node_modules package-lock.json
npm install
```

### æ—¥æœ¬èªè¡¨ç¤ºå•é¡Œ
```bash
# ãƒ­ã‚±ãƒ¼ãƒ«ç¢ºèª
locale
echo $LANG

# å†è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
sudo locale-gen ja_JP.UTF-8
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒã‚¦ãƒ³ãƒˆ
- `sources/`, `ingested/` ã¯ãƒã‚¤ãƒ³ãƒ‰ãƒã‚¦ãƒ³ãƒˆã§æ°¸ç¶šåŒ–
- `node_modules` ã¯åå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

### ãƒ¡ãƒ¢ãƒªãƒ»CPU
æ¨å¥¨ãƒªã‚½ãƒ¼ã‚¹ï¼š
- **ãƒ¡ãƒ¢ãƒª**: 4GBä»¥ä¸Š
- **CPU**: 2ã‚³ã‚¢ä»¥ä¸Š
- **ãƒ‡ã‚£ã‚¹ã‚¯**: 10GBä»¥ä¸Šã®ç©ºãå®¹é‡

## ğŸ”„ æ›´æ–°ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### ã‚¤ãƒ¡ãƒ¼ã‚¸æ›´æ–°
```bash
# Devcontainerãƒªãƒ“ãƒ«ãƒ‰
> Dev Containers: Rebuild Container

# å®Œå…¨ãƒªãƒ“ãƒ«ãƒ‰ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—ï¼‰
> Dev Containers: Rebuild Container (No Cache)
```

### è¨­å®šå¤‰æ›´
`devcontainer.json` ç·¨é›†å¾Œï¼š
```bash
> Dev Containers: Reopen in Container
```

## ğŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### å¤–éƒ¨é€šä¿¡
- å®˜å…¬åºã‚µã‚¤ãƒˆã¸ã®HTTPSé€šä¿¡ã®ã¿è¨±å¯
- ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã¯ç’°å¢ƒå¤‰æ•°ã§å¯¾å¿œ

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ï¼ˆå¤–éƒ¨é€ä¿¡ãªã—ï¼‰
- æ©Ÿå¯†æƒ…å ±ã¯ç’°å¢ƒå¤‰æ•°ç®¡ç†

## ğŸ”® å°†æ¥æ‹¡å¼µ

### è¿½åŠ ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆæ¸ˆã¿ï¼‰
- **Elasticsearch**: å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
- **Redis**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **PostgreSQL**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿DB

### æœ‰åŠ¹åŒ–æ–¹æ³•
`docker-compose.yml` ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è§£é™¤ã—ã¦ãƒªãƒ“ãƒ«ãƒ‰ï¼š
```bash
> Dev Containers: Rebuild Container
```
